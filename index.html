<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OX MODZ</title>
    <style>
        /* --- General & Reset --- */
        :root {
            --primary-color: #007aff;
            --secondary-color: #5856d6;
            --pink-color: #d656b3; 
            --primary-light: rgba(0, 122, 255, 0.15);
            --dark-bg: #0d0d0f; 
            --light-bg: #1c1c1e;
            --card-bg: #2c2c2e;
            --text-primary: #f5f5f7;
            --text-secondary: #8e8e93;
            --border-color: #38383a;
            --success-color: #34c759;
            --success-light: rgba(52, 199, 89, 0.15);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* --- Ultimate Aurora Background --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.5;
            overflow-x: hidden;
            position: relative;
        }
        body::before, body::after {
            content: '';
            position: fixed;
            top: 50%; left: 50%;
            width: 100vw;
            height: 100vw;
            z-index: -1;
            transform-origin: center center;
            opacity: 0.25;
            will-change: transform;
        }
        body::before {
            background: radial-gradient(circle at 20% 20%, var(--primary-color), transparent 50%),
                        radial-gradient(circle at 80% 70%, var(--secondary-color), transparent 50%);
            animation: move-aurora-1 30s infinite linear;
        }
        body::after {
            background: radial-gradient(circle at 50% 50%, var(--pink-color), transparent 50%);
            animation: move-aurora-2 35s infinite linear;
        }

        @keyframes move-aurora-1 {
            from { transform: translate(-50%, -50%) rotate(0deg) scale(2.5); }
            to { transform: translate(-50%, -50%) rotate(360deg) scale(2.5); }
        }
        @keyframes move-aurora-2 {
            from { transform: translate(-50%, -50%) rotate(360deg) scale(2.5); }
            to { transform: translate(-50%, -50%) rotate(0deg) scale(2.5); }
        }

        .container { max-width: 900px; margin: 0 auto; padding: 0 15px; }
        
        /* --- Loader Styles --- */
        #loader-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--dark-bg); display: flex; justify-content: center;
            align-items: center; z-index: 9999; opacity: 1; transition: opacity 0.5s ease;
        }
        .spinner { width: 50px; height: 50px; border: 5px solid var(--border-color); border-top-color: var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* --- Header --- */
        .store-header { padding: 15px; background-color: rgba(28, 28, 30, 0.75); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .store-info { display: flex; align-items: center; gap: 12px; }
        .store-logo-link { transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .store-logo-link:hover { transform: scale(1.1); }
        .store-logo-link:active { transform: scale(0.95); transition-duration: 0.1s; }
        .store-logo { width: 40px; height: 40px; border-radius: 8px; object-fit: cover; display: block; }
        
        .header-actions { display: flex; align-items: center; gap: 10px; }

        /* --- Animated Store Name --- */
        .store-name { font-size: 1.5rem; font-weight: 700; display: flex; position: relative; overflow: hidden; }
        .store-name span { background: linear-gradient(90deg, var(--primary-color), var(--pink-color), var(--primary-color)); background-size: 200% auto; background-clip: text; -webkit-background-clip: text; color: transparent; animation: text-gradient-flow 5s ease-in-out infinite, letter-appear 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both; }
        .store-name::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(100deg, transparent, rgba(255, 255, 255, 0.4), transparent); transform: translateX(-100%); animation: shimmer 6s infinite; animation-delay: 2.5s; }
        @keyframes text-gradient-flow { 0% { background-position: 200% center; } 100% { background-position: 0% center; } }
        @keyframes letter-appear { from { opacity: 0; transform: translateY(-20px) scale(1.2); } to { opacity: 1; transform: translateY(0) scale(1); } }
        @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        /* --- Buttons --- */
        .btn { display: inline-block; padding: 8px 16px; border: none; border-radius: 20px; font-size: 0.9rem; font-weight: 600; cursor: pointer; text-align: center; text-decoration: none; transition: all 0.2s; will-change: transform, box-shadow; }
        .btn-primary { background-color: var(--primary-light); color: var(--primary-color); box-shadow: 0 0 0 0 rgba(0, 122, 255, 0); }
        .btn-primary:hover { background-color: rgba(0, 122, 255, 0.2); box-shadow: 0 0 15px 0 rgba(0, 122, 255, 0.4); transform: translateY(-2px) scale(1.05); }
        .btn:active { transform: scale(0.96); }
        #donate-btn { background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); color: white; padding: 8px 18px; display: flex; align-items: center; gap: 8px; background-size: 200% 200%; animation: gradient-pulse 4s ease infinite; }
        #donate-btn svg { width: 16px; height: 16px; }
        @keyframes gradient-pulse { 0% { background-position: 0% 50%; box-shadow: 0 0 8px var(--secondary-color); } 50% { background-position: 100% 50%; box-shadow: 0 0 20px var(--primary-color); } 100% { background-position: 0% 50%; box-shadow: 0 0 8px var(--secondary-color); } }

        /* --- Controls & Page Load Animation --- */
        .controls { padding: 15px; display: flex; gap: 15px; flex-wrap: wrap; animation: fade-in-up 0.6s 0.2s both ease-out; }
        .search-bar { flex-grow: 1; position: relative; }
        .search-bar input { width: 100%; padding: 10px 15px 10px 40px; background-color: var(--light-bg); border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-primary); font-size: 1rem; transition: border-color 0.2s, box-shadow 0.2s; }
        .search-bar input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 10px 0 rgba(0, 122, 255, 0.5); }
        .search-icon { position: absolute; top: 50%; left: 12px; transform: translateY(-50%); color: var(--text-secondary); }
        #category-filter { padding: 10px; background-color: var(--light-bg); border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-primary); }
        
        /* --- Optimized App List & Scroll Animation --- */
        #app-list { padding: 0 15px 30px; display: grid; gap: 15px; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); }
        .app-item { background-color: var(--light-bg); border: 1px solid var(--border-color); will-change: transform, opacity; opacity: 0; transform: translateY(20px); transition: opacity 0.5s ease-out, transform 0.5s ease-out, background-color 0.2s; display: flex; align-items: center; padding: 15px; border-radius: 16px; cursor: pointer; gap: 15px; }
        .app-item.visible { opacity: 1; transform: translateY(0); }
        .app-item:hover { background-color: var(--card-bg); transform: translateY(-5px); box-shadow: 0 8px 30px rgba(0,0,0,0.4); }
        .app-item-logo { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; flex-shrink: 0; }
        .app-item-details { flex-grow: 1; overflow: hidden; }
        .app-item-title { font-size: 1.1rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .app-item-subtitle { font-size: 0.9rem; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        /* --- Details View (Keeps Glass Effect) --- */
        #details-view { padding: 20px 15px 80px; position: relative; display: none; }
        .back-btn { position: absolute; top: 20px; left: 15px; font-size: 1rem; color: var(--primary-color); cursor: pointer; background: none; border: none; }
        .details-header, .app-meta-info, #details-view .section-title, #details-view p { opacity: 0; animation: fade-in-up 0.6s both ease-out; will-change: transform, opacity; }
        #details-view.view-visible .details-header { animation-delay: 0.1s; }
        #details-view.view-visible .app-meta-info { animation-delay: 0.2s; }
        #details-view.view-visible .section-title:nth-of-type(1) { animation-delay: 0.3s; }
        #details-view.view-visible #details-description { animation-delay: 0.4s; }
        #details-view.view-visible .section-title:nth-of-type(2) { animation-delay: 0.5s; }
        #details-view.view-visible #details-permissions { animation-delay: 0.6s; }
        .details-header { display: flex; gap: 20px; margin-top: 50px; align-items: flex-start; }
        .details-logo { width: 100px; height: 100px; border-radius: 22px; object-fit: cover; flex-shrink: 0; }
        .details-info { padding-top: 5px; }
        .details-title { font-size: 1.5rem; font-weight: 700; }
        .details-subtitle { color: var(--text-secondary); margin-bottom: 10px; }
        .section-title { font-size: 1.2rem; font-weight: 600; margin: 25px 0 10px; padding-bottom: 5px; border-bottom: 1px solid var(--border-color); }
        .details-description, .details-permissions { white-space: pre-wrap; color: var(--text-secondary); }
        .app-meta-info { display: flex; justify-content: space-around; text-align: center; padding: 20px 0; margin: 20px 0; border-radius: 16px; background-color: rgba(44, 44, 46, 0.6); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .meta-item { display: flex; flex-direction: column; align-items: center; }
        .meta-value { font-size: 1rem; font-weight: 600; color: var(--text-primary); }
        .meta-label { font-size: 0.8rem; color: var(--text-secondary); margin-top: 4px; }
        .download-footer { position: fixed; bottom: 0; left: 0; right: 0; padding: 15px; background-color: rgba(44, 44, 46, 0.9); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); text-align: center; }
        .download-footer .btn { padding: 12px 25px; font-size: 1.1rem; width: 100%; max-width: 300px; }
        .hidden { display: none !important; }

        /* --- Final Remaster Download Popup/Modal Styles --- */
        #download-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); display: flex; justify-content: center; align-items: center; z-index: 1000; opacity: 0; transition: opacity 0.3s ease; pointer-events: none; }
        #download-modal-overlay:not(.hidden) { opacity: 1; pointer-events: all; }
        #download-modal { background-color: rgba(44, 44, 46, 0.75); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); padding: 25px; border-radius: 16px; width: 90%; max-width: 400px; text-align: center; border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 10px 30px rgba(0,0,0,0.5); position: relative; opacity: 0; transform: translateY(-30px) scale(0.95); transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease; will-change: transform, opacity; }
        #download-modal-overlay:not(.hidden) #download-modal { opacity: 1; transform: translateY(0) scale(1); }
        #download-modal h2 { font-size: 1.4rem; font-weight: 700; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        #download-modal h2 svg { width: 22px; height: 22px; fill: var(--text-primary); }
        #download-modal p { color: var(--text-secondary); margin-bottom: 20px; font-size: 0.95rem; }
        .progress-label { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; font-size: 0.9rem; color: var(--text-secondary); }
        #progress-counter { font-weight: 600; color: var(--text-primary); }
        .progress-bar-container { width: 100%; height: 8px; background-color: var(--light-bg); border-radius: 4px; overflow: hidden; }
        .progress-bar { width: 0%; height: 100%; background: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); border-radius: 4px; transition: width 0.5s ease-in-out; }
        .modal-actions { margin-top: 25px; display: flex; flex-direction: column; gap: 12px; }
        .modal-actions .step-item { opacity: 0; animation: fade-in-up 0.6s both ease-out; will-change: transform, opacity; }
        #download-modal.modal-visible .step-item:nth-child(1) { animation-delay: 0.2s; }
        #download-modal.modal-visible .step-item:nth-child(2) { animation-delay: 0.3s; }
        #download-modal.modal-visible .step-item:nth-child(3) { animation-delay: 0.4s; }
        .step-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; border-radius: 10px; border: 1px solid var(--border-color); background-color: var(--light-bg); color: var(--text-secondary); font-weight: 500; cursor: pointer; transition: all 0.3s ease; opacity: 0.6; }
        .step-item.active { opacity: 1; color: var(--text-primary); border-color: var(--primary-color); background-color: var(--primary-light); }
        .step-item.active:hover { background-color: rgba(0, 122, 255, 0.25); }
        .step-item.completed { opacity: 1; border-color: var(--success-color); background: var(--success-light); color: var(--text-primary); cursor: not-allowed; position: relative; background-size: 200% 200%; animation: completed-glow 3s linear infinite; }
        @keyframes completed-glow { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        .step-item.completed { background-image: linear-gradient(100deg, var(--success-light), rgba(52, 199, 89, 0.3), var(--success-light)); }
        .step-info { display: flex; align-items: center; gap: 12px; }
        .step-info .step-number { font-weight: 700; color: var(--text-secondary); }
        .step-item.active .step-info .step-number { color: var(--primary-color); }
        .step-item.completed .step-info .step-number { color: var(--success-color); }
        .step-icon svg { width: 22px; height: 22px; fill: var(--text-secondary); transition: fill 0.3s ease; }
        .step-item.active .step-icon svg { fill: var(--primary-color); }
        .step-item.completed .step-icon svg { fill: var(--success-color); }
        .step-status { position: relative; width: 24px; height: 24px; display: flex; justify-content: center; align-items: center; }
        .step-status .spinner-icon { width: 20px; height: 20px; border: 3px solid var(--text-secondary); border-top-color: var(--primary-color); border-radius: 50%; animation: spin 0.8s linear infinite; position: absolute; }
        .step-status .checkmark-icon { color: var(--success-color); font-size: 24px; font-weight: bold; position: absolute; transform: scale(0); }
        .step-item.completed .checkmark-icon { animation: pop-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        .download-button-wrapper { position: relative; margin-top: 20px; height: 45px; }
        #modal-download-btn, #modal-download-btn-disabled { width: 100%; padding: 12px; font-size: 1.1rem; border-radius: 10px; transition: all 0.3s ease; text-decoration: none; display: block; box-sizing: border-box; position: absolute; left: 0; }
        #modal-download-btn-disabled { background-color: var(--light-bg); border: 1px solid var(--border-color); color: var(--text-secondary); cursor: not-allowed; opacity: 1; }
        #modal-download-btn { background-color: var(--primary-color); color: white; animation: glow-pulse 2s infinite; transform: translateY(-2px); opacity: 0; pointer-events: none; }
        #modal-download-btn.unlocked { opacity: 1; pointer-events: all; animation: pop-in 0.5s 0.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards, glow-pulse 2s infinite 0.5s; }
        #modal-close-btn { position: absolute; top: 10px; right: 10px; background: var(--light-bg); border: none; color: var(--text-secondary); font-size: 1.2rem; cursor: pointer; width: 30px; height: 30px; border-radius: 50%; line-height: 30px; }
        @keyframes fade-in-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pop-in { 0% { opacity: 0; transform: scale(0); } 70% { transform: scale(1.2); } 100% { opacity: 1; transform: scale(1); } }
        @keyframes glow-pulse { 0% { box-shadow: 0 0 4px var(--primary-color); } 50% { box-shadow: 0 0 16px var(--primary-color), 0 0 24px var(--primary-color); } 100% { box-shadow: 0 0 4px var(--primary-color); } }
    </style>
</head>
<body>
    <div id="loader-overlay"><div class="spinner"></div></div>
    
    <div id="home-view">
        <header class="store-header">
            <div class="store-info">
                <a href="https://prusty-ctrl.github.io/web-card/" target="_blank" id="header-logo-link" class="store-logo-link"><img id="header-logo" src="" alt="Logo" class="store-logo"></a>
                <h1 id="header-name" class="store-name"></h1>
            </div>
            <div class="header-actions">
                <a href="https://prusty-ctrl.github.io/web-card/" target="_blank" class="btn btn-primary">About Us</a>
                <a href="#" id="donate-btn" class="btn hidden" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/></svg><span>Donate</span></a>
            </div>
        </header>
        <main class="container">
            <div class="controls">
                <div class="search-bar"><span class="search-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg></span><input type="search" id="search-input" placeholder="Search Apps & Games"></div>
                <select id="category-filter"><option value="All">All</option><option value="App">Apps</option><option value="Game">Games</option></select>
            </div>
            <div id="app-list"></div>
        </main>
    </div>

    <div id="details-view" class="container">
        <button id="back-btn" class="back-btn">&lt; Back</button>
        <header class="details-header"><img id="details-logo" src="" class="details-logo"><div class="details-info"><h1 id="details-title" class="details-title"></h1><p id="details-subtitle" class="details-subtitle"></p><button id="details-download-btn-top" class="btn btn-primary">Download</button></div></header>
        <main>
            <div class="app-meta-info">
                <div class="meta-item"><span id="details-rating" class="meta-value">4.6 ★</span><span class="meta-label">Rating</span></div>
                <div class="meta-item"><span id="details-size" class="meta-value">-- MB</span><span class="meta-label">Size</span></div>
                <div class="meta-item"><span id="details-downloads" class="meta-value">100K+</span><span class="meta-label">Downloads</span></div>
                <div class="meta-item"><span id="details-type" class="meta-value">App</span><span class="meta-label">Type</span></div>
            </div>
            <h2 class="section-title">Description</h2>
            <p id="details-description" class="details-description"></p>
            <h2 class="section-title">Permissions</h2>
            <p id="details-permissions" class="details-permissions"></p>
        </main>
        <footer class="download-footer"><button id="details-download-btn-bottom" class="btn btn-primary">Download</button></footer>
    </div>
    
    <div id="download-modal-overlay" class="hidden">
        <div id="download-modal">
            <button id="modal-close-btn">&times;</button>
            <h2><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"/></svg>Unlock Your Download</h2>
            <p>Complete all steps to activate the download button.</p>
            <div class="progress-label"><span>Progress</span><span id="progress-counter">0%</span></div>
            <div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div>
            <div class="modal-actions">
                <div class="step-item" data-action="1"><div class="step-info"><div class="step-icon"><svg viewBox="0 0 24 24"><path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.2,5.2 0,0 1,16.2 22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.2,5.2 0,0 1,7.8 2M7.6,4A3.6,3.6 0,0 0,4 7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0,0 0,20 16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0,0 1,18.5 6.75A1.25,1.25 0,0 1,17.25 8A1.25,1.25 0,0 1,16 6.75A1.25,1.25 0,0 1,17.25 5.5M12,7A5,5 0,0 1,17 12A5,5 0,0 1,12 17A5,5 0,0 1,7 12A5,5 0,0 1,12 7M12,9A3,3 0,0 0,9 12A3,3 0,0 0,12 15A3,3 0,0 0,15 12A3,3 0,0 0,12 9Z" /></svg></div><span>Follow on Instagram</span></div><div class="step-status"><div class="spinner-icon hidden"></div><div class="checkmark-icon hidden">✓</div></div></div>
                <div class="step-item" data-action="2"><div class="step-info"><div class="step-icon"><svg viewBox="0 0 24 24"><path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.2,5.2 0,0 1,16.2 22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.2,5.2 0,0 1,7.8 2M7.6,4A3.6,3.6 0,0 0,4 7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0,0 0,20 16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0,0 1,18.5 6.75A1.25,1.25 0,0 1,17.25 8A1.25,1.25 0,0 1,16 6.75A1.25,1.25 0,0 1,17.25 5.5M12,7A5,5 0,0 1,17 12A5,5 0,0 1,12 17A5,5 0,0 1,7 12A5,5 0,0 1,12 7M12,9A3,3 0,0 0,9 12A3,3 0,0 0,12 15A3,3 0,0 0,15 12A3,3 0,0 0,12 9Z" /></svg></div><span>Follow 2nd ID</span></div><div class="step-status"><div class="spinner-icon hidden"></div><div class="checkmark-icon hidden">✓</div></div></div>
                <div class="step-item" data-action="3"><div class="step-info"><div class="step-icon"><svg viewBox="0 0 24 24"><path d="M15.3,5.1L4.3,9C3.4,9.4,3.4,10.05,4.2,10.3L6.9,11.2L13.6,6.4C14,6.2,14.4,6.4,14.1,6.7L8.4,11.9L8.2,15C8.5,15,8.7,14.9,8.85,14.75L10.2,13.4L13.3,15.83C14,16.25,14.5,16.03,14.7,15.23L16.2,8.13C16.5,5.3,15.9,4.9,15.3,5.1Z" /></svg></div><span>Join Telegram</span></div><div class="step-status"><div class="spinner-icon hidden"></div><div class="checkmark-icon hidden">✓</div></div></div>
            </div>
            <div class="download-button-wrapper">
                <a href="#" id="modal-download-btn-disabled" class="btn">Download Now</a>
                <a href="#" id="modal-download-btn" class="btn">Unlocked!</a>
            </div>
        </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyCF20MwRme6CAOxhNHcq_MrOtKCcAJ0Dpc",
          authDomain: "fireapps-1980b.firebaseapp.com",
          databaseURL: "https://fireapps-1980b-default-rtdb.firebaseio.com",
          projectId: "fireapps-1980b",
          storageBucket: "fireapps-1980b.firebasestorage.app",
          messagingSenderId: "1008421685686",
          appId: "1:1008421685686:web:fbe06e4ddcaf1907c55917"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const $ = (s) => document.querySelector(s);
        const $$ = (s) => document.querySelectorAll(s);

        const loaderOverlay = $('#loader-overlay'), homeView = $('#home-view'), detailsView = $('#details-view'), headerLogo = $('#header-logo'), headerName = $('#header-name'), donateBtn = $('#donate-btn'), searchInput = $('#search-input'), categoryFilter = $('#category-filter'), appList = $('#app-list'), backBtn = $('#back-btn'), detailsLogo = $('#details-logo'), detailsTitle = $('#details-title'), detailsSubtitle = $('#details-subtitle'), detailsDownloadBtnTop = $('#details-download-btn-top'), detailsDownloadBtnBottom = $('#details-download-btn-bottom'), detailsSize = $('#details-size'), detailsType = $('#details-type'), detailsDescription = $('#details-description'), detailsPermissions = $('#details-permissions'), modalOverlay = $('#download-modal-overlay'), downloadModal = $('#download-modal'), modalDownloadBtn = $('#modal-download-btn'), modalDownloadBtnDisabled = $('#modal-download-btn-disabled'), modalCloseBtn = $('#modal-close-btn'), modalActionsContainer = $('.modal-actions'), progressBar = $('#progress-bar'), progressCounter = $('#progress-counter');
        
        let allApps = {}, filters = { search: '', category: 'All' }, currentDownloadLink = '', completedActions = new Set(), isInitialLoad = true;
        const socialLinks = { 1: "https://www.instagram.com/mr.xubham_1x?igsh=MWtuN3B6cmNnMW9pZQ==", 2: "https://www.instagram.com/premium_9.99?igsh=MXJwNXliaDZxMDQwbg==", 3: "https://t.me/premiumappsale" };
        
        function animateStoreName(name) { name.split('').forEach((l, i) => { const s = document.createElement('span'); s.innerHTML = l === ' ' ? '&nbsp;' : l; s.style.animationDelay = `${i * 0.05}s`; headerName.appendChild(s); }); }
        function setupScrollAnimations() { const o = new IntersectionObserver((e) => e.forEach(i => { if (i.isIntersecting) { i.target.classList.add('visible'); o.unobserve(i.target); } }), { threshold: 0.1 }); $$('.app-item').forEach(i => o.observe(i)); }
        function loadInitialData() {
            db.ref('settings').once('value', s => { if(s.val()){ animateStoreName(s.val().name); headerLogo.src = s.val().logoUrl; document.title = s.val().name; } });
            db.ref('upi/id').once('value', s => { if(s.val()){ donateBtn.href = `upi://pay?pa=${s.val()}&pn=Donation&cu=INR`; donateBtn.classList.remove('hidden'); } });
            db.ref('apps').on('value', s => { allApps = s.val() || {}; renderAppList(); if (isInitialLoad) { loaderOverlay.style.opacity = '0'; setTimeout(() => loaderOverlay.style.display = 'none', 500); isInitialLoad = false; } });
        }
        function renderAppList() {
            appList.innerHTML = '';
            const f = Object.entries(allApps).filter(([i, a]) => (filters.category === 'All' || a.category === filters.category) && (!filters.search || a.title.toLowerCase().includes(filters.search.toLowerCase())));
            if (f.length === 0) { appList.innerHTML = `<p style="text-align: center; color: var(--text-secondary); padding: 20px;">No apps found.</p>`; return; }
            f.sort(() => Math.random() - 0.5).forEach(([i, a]) => { const item = document.createElement('div'); item.className = 'app-item'; item.dataset.id = i; item.innerHTML = `<img src="${a.logoUrl}" alt="${a.title} Logo" class="app-item-logo"><div class="app-item-details"><div class="app-item-title">${a.title}</div><div class="app-item-subtitle">${a.subtitle}</div></div><div class="app-item-action"><button class="btn btn-primary" data-id="${i}" data-link="${a.downloadLink}">Download</button></div>`; appList.appendChild(item); });
            setupScrollAnimations();
        }
        function showDetailsView(appId) {
            const app = allApps[appId];
            if (!app) return;
            Object.assign(detailsLogo, {src: app.logoUrl});
            Object.assign(detailsTitle, {textContent: app.title});
            Object.assign(detailsSubtitle, {textContent: app.subtitle});
            [detailsDownloadBtnTop, detailsDownloadBtnBottom].forEach(b => b.dataset.link = app.downloadLink);
            detailsDescription.textContent = app.description;
            detailsPermissions.textContent = app.permissions || 'No special permissions required.';
            detailsSize.textContent = app.size || 'N/A';
            detailsType.textContent = app.category || 'App';
            homeView.style.display = 'none';
            detailsView.style.display = 'block';
            detailsView.classList.add('view-visible');
            window.scrollTo(0, 0);
        }
        function showHomeView() { detailsView.classList.remove('view-visible'); detailsView.style.display = 'none'; homeView.style.display = 'block'; }
        function updateProgressBar() { const p = Math.round((completedActions.size / 3) * 100); progressBar.style.width = `${p}%`; let s = parseInt(progressCounter.textContent); if (s === p) return; let d = 300, st = performance.now(); (function a(t) { let e = Math.min((t - st) / d, 1); progressCounter.textContent = Math.round(s + (p - s) * e) + '%'; if (e < 1) requestAnimationFrame(a); })(performance.now()); }
        function setActiveStep() { $$('.step-item').forEach((step, i) => { step.classList.remove('active'); if (i === completedActions.size && i < 3) step.classList.add('active'); }); }
        function openDownloadModal(link) {
            currentDownloadLink = link;
            completedActions.clear();
            modalDownloadBtn.classList.remove('unlocked');
            modalDownloadBtnDisabled.style.opacity = '1';
            $$('.step-item').forEach(item => item.classList.remove('completed'));
            setActiveStep();
            updateProgressBar();
            modalOverlay.classList.remove('hidden');
            setTimeout(() => downloadModal.classList.add('modal-visible'), 50);
        }
        function closeDownloadModal() { downloadModal.classList.remove('modal-visible'); modalOverlay.classList.add('hidden'); }
        function checkActionsComplete() {
            updateProgressBar();
            setActiveStep();
            if (completedActions.size === 3) {
                setTimeout(() => {
                    modalDownloadBtnDisabled.style.opacity = '0';
                    modalDownloadBtn.href = currentDownloadLink;
                    modalDownloadBtn.target = "_blank";
                    modalDownloadBtn.classList.add('unlocked');
                }, 500);
            }
        }
        modalActionsContainer.addEventListener('click', e => {
            const stepItem = e.target.closest('.step-item');
            if (!stepItem || !stepItem.classList.contains('active') || completedActions.has(stepItem.dataset.action)) return;
            const actionId = stepItem.dataset.action;
            window.open(socialLinks[actionId], '_blank');
            stepItem.querySelector('.spinner-icon').classList.remove('hidden');
            stepItem.classList.remove('active');
            setTimeout(() => {
                stepItem.querySelector('.spinner-icon').classList.add('hidden');
                stepItem.classList.add('completed');
                completedActions.add(actionId);
                checkActionsComplete();
            }, 2000);
        });
        searchInput.addEventListener('input', e => { filters.search = e.target.value; renderAppList(); });
        categoryFilter.addEventListener('change', e => { filters.category = e.target.value; renderAppList(); });
        backBtn.addEventListener('click', showHomeView);
        modalCloseBtn.addEventListener('click', closeDownloadModal);
        [detailsDownloadBtnTop, detailsDownloadBtnBottom].forEach(b => b.addEventListener('click', e => openDownloadModal(e.currentTarget.dataset.link)));
        appList.addEventListener('click', e => { const i = e.target.closest('.app-item'); if (i && !e.target.classList.contains('btn')) showDetailsView(i.dataset.id); });
        document.addEventListener('DOMContentLoaded', loadInitialData);
    </script>
</body>
  </html>
